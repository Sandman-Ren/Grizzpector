# Grizzpector
Grizzpector is a discord bot that rates your Splatoon 3 Salmon Run shifts on behalf of Mr. Grizz.

## Acknowledgements
✨Special thanks to [liang2kl](https://github.com/liang2kl/splatoon-bot-wechat) for the idea of creating a chatbot for rating Splatoon 3 Salmon Run shifts & implementation of logic related to [samuelthomas2274](https://github.com/samuelthomas2774/nxapi) for authenticating and retrieving data from Nintendo Switch Online and Splatoon 3 API. Read more about their projects using the aforementioned links.✨

🧠Grizzpector Icon is generated by ChatGPT 4o.

## Using Grizzpector

Add Grizzpector to your server by visiting [this installation link](https://discord.com/oauth2/authorize?client_id=1300544487092654221&permissions=2048&integration_type=0&scope=bot+applications.commands).

Follow the steps below for interacting with Grizzpector in your Discord server:
- `/signin` to sign in via your Nintendo Switch Online account
- `/inspect` to inspect your Splatoon 3 Salmon Run shift, scored by a hard-coded scoring function
  - by default, Grizzpector's response is only visible to the command invoker, use the `/inspect public <True/False>` command to make it visible to everyone in the channel

## Supported Commands

Below is a list of commands supported by Grizzpector. Currently, all commands are installed as global slash commands.

```/poke```:  pokes Grizzpector. This servces as a liveliness check via Discord.

```/signin```: signs in the current user via Nintendo Switch Online so that Grizzpector can pull the user's Splatoon 3 Salmon Run shift data.

>⚠️ Your data will be sent to a third-party API [nxapi-znca-api.fancy.org.uk](https://github.com/samuelthomas2774/nxapi-znca-api). Read more about the implications here: [GitHub/samuelthomas2774/nxapi Questions](https://github.com/samuelthomas2774/nxapi?tab=readme-ov-file#will-my-nintendo-switch-console-be-banned-for-using-this) and the third-party API [GitHub/samuelthomas2774/nxapi-znca-api](https://github.com/samuelthomas2774/nxapi-znca-api).

```/inspect```: inspects the current user's Splatoon 3 Salmon Run shift and scores it using a hard-coded scoring function:
```javascript
const scoreFunction = (powerEggs: number,
                        goldenEggs: number,
                        goldenEggsAssists: number,
                        defeatEnemyCount: number,
                        rescueCount: number,
                        rescuedCount: number) => {
    return (
        powerEggs * 1.0 + goldenEggs * 100.0 + goldenEggsAssists * 20.0 +
        300.0 * defeatEnemyCount +
        50.0 * rescueCount + (-100.0) * rescuedCount
    );
};
```
Planned updates to add support for custom scoring functions.
By default, Grizzpector's response to this command is only visible to the command invoker. This can be changed by adding the `public` option and setting the value to `true`.
- options:
  - ```/inspect public <True/False>```: sets the visibility of Grizzpector's response. When `True`, Grizzpector's response is visible to everyone in the channel. When `False`, Grizzpector's response is only visible to the command invoker.

## Issues?

Feel free to submit issues to this repo for bugs and server problems 🎓
